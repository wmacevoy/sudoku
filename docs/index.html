<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Intentional Sudoku</title>
  <style>
    :root{
      --bg:#0b0c10;
      --panel:#0f141d;
      --ink:#e8ecf2;
      --muted:#91a0b6;
      --accent:#60a5fa;
      --accent-2:#22d3ee;
      --danger:#f87171;
      --grid:#1f2430;
      --strong:#e2e8f0;
      --cell:#0e1726;
      --cell-alt:#101a2d;
      --hit:#0ea5e9;
      --maybe:#334155;
    }
    *{box-sizing:border-box;}
    body{margin:0; font-family: "Inter", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; background:var(--bg); color:var(--ink); display:flex; flex-direction:column; min-height:100vh;}
    .topbar{display:flex; align-items:center; justify-content:space-between; padding:14px 16px; background:var(--panel); gap:12px; position:sticky; top:0; z-index:10; border-bottom:1px solid #111827;}
    .brand{font-weight:700; letter-spacing:0.3px;}
    .controls{display:flex; align-items:center; gap:10px; flex-wrap:wrap;}
    .help-toggle{display:flex; align-items:center; gap:6px; font-size:13px; color:var(--muted);}
    .help-toggle input{accent-color:var(--accent);}
    select, button{background:var(--cell); border:1px solid var(--grid); color:var(--ink); border-radius:10px; padding:9px 12px; font-size:14px;}
    button{cursor:pointer;}
    button.toggle{min-width:42px; font-weight:700;}
    button.toggle.active{background:var(--accent-2); color:#0b0c10; border-color:var(--accent-2);}
    button:focus-visible, select:focus-visible{outline:2px solid var(--accent);}
    button.primary{background:var(--accent); color:#0b0c10; border-color:var(--accent);}
    main.layout{flex:1; display:flex; flex-direction:column; gap:12px; padding:14px; max-width:1100px; width:100%; margin:0 auto;}
    .board-section{display:flex; justify-content:center;}
    .grid{width:min(100%, 760px); aspect-ratio:1/1; background:var(--panel); border-radius:18px; padding:12px; display:grid; grid-template-columns:repeat(9,1fr); grid-template-rows:repeat(9,1fr); gap:1px; box-shadow:0 10px 24px rgba(0,0,0,0.35), inset 0 0 0 2px var(--strong);}
    .cell{position:relative; background:var(--cell); display:flex; align-items:center; justify-content:center; font-weight:700; font-size:clamp(16px, 3vw, 32px); transition:background 0.12s, box-shadow 0.12s; border:1px solid var(--grid);}
    .cell.box-alt{background:var(--cell-alt);}
    .cell[data-row="1"], .cell[data-row="4"], .cell[data-row="7"]{border-top:1px solid var(--strong);}
    .cell[data-col="1"], .cell[data-col="4"], .cell[data-col="7"]{border-left:1px solid var(--strong);}
    .cell[data-col="9"]{border-right:1px solid var(--strong);}
    .cell[data-row="9"]{border-bottom:1px solid var(--strong);}
    .cell.selected{outline:2px dotted var(--accent); outline-offset:-4px; border-radius:10px;}
    .cell.highlight-hit{background:rgba(96,165,250,0.12); color:var(--strong);}
    .cell.highlight-maybe{background:rgba(51,65,85,0.65);}
    .cell.option-focus{box-shadow: inset 0 0 0 2px var(--accent);}
    .cell.option-dim{opacity:0.45; filter:saturate(0.45);}
    .cell.uncertain .value{color:var(--danger);}
    .cell.single-option .value{font-weight:800; color:var(--accent-2);}
    .value{z-index:1;}
    .options{position:absolute; inset:6px; display:grid; grid-template-columns:repeat(3,1fr); grid-template-rows:repeat(3,1fr); gap:2px; font-size:11px; color:var(--muted); pointer-events:none; z-index:0;}
    .options.cover{inset:0; background:var(--cell); border-radius:12px; box-shadow: inset 0 0 0 1px var(--grid);}
    .options.hidden{display:none;}
    .option{display:flex; align-items:center; justify-content:center; border-radius:4px; opacity:0.25;}
    .option.active{opacity:0.85;}
    .option.single{font-weight:700; color:var(--accent-2); opacity:1;}
    .option.is-five{align-items:center; justify-content:center;}
    .option.placed{color:var(--strong); font-weight:700; opacity:1;}
    .option.highlight{color:var(--accent-2); background:rgba(34,211,238,0.12); opacity:1;}
    .notes{position:absolute; inset:6px; display:flex; flex-wrap:wrap; gap:3px; align-content:flex-start; font-size:12px; color:var(--muted);}
    .legend{margin:0; padding:12px 14px; background:var(--panel); border-radius:12px; color:var(--muted); line-height:1.4;}
    .keypad{position:sticky; bottom:0; background:rgba(11,12,16,0.9); backdrop-filter: blur(8px); display:grid; grid-template-columns:repeat(5, minmax(0,1fr)); gap:8px; padding:12px; border-top:1px solid #111827;}
    .keypad button{padding:14px 0; font-size:16px; border-radius:12px; border:1px solid var(--grid); background:var(--cell); color:var(--ink);}
    .keypad button.active{border-color:var(--accent); color:var(--accent);}
    .keypad button.highlighting{border-color:var(--accent-2); color:var(--accent-2);}
    #print-sheet{display:none;}
    @media (min-width: 768px){
      .grid{width:min(90vw, 620px);}
      .keypad{grid-template-columns:repeat(10, minmax(0,1fr));}
      .keypad button{padding:12px 0;}
    }
    @media print{
      body{background:#fff;}
      body > :not(#print-sheet){display:none !important;}
      #print-sheet{display:block !important;}
    }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand">Intentional Sudoku</div>
    <div class="controls">
      <select id="sel-diff">
        <option value="simple">Simple</option>
        <option value="easy">Easy</option>
        <option value="medium" selected>Medium</option>
        <option value="hard">Hard</option>
      </select>
      <button id="btn-new">New</button>
      <button id="btn-solve">Solve!</button>
      <button id="btn-print">Print</button>
      <button id="btn-contest" type="button" onclick="window.location.href='contest.html'">Contest!</button>
      <button id="btn-toggle-options" class="toggle" title="Toggle option grid" aria-label="Toggle option grid">#</button>
      <button id="btn-share" class="primary">Share Link</button>
      <label class="help-toggle" title="Toggle helper auto-candidates">
        <input type="checkbox" id="chk-help" checked />
        Help
      </label>
    </div>
  </header>
  <main class="layout">
    <section class="board-section">
      <div id="grid" class="grid" role="grid" aria-label="Sudoku grid"></div>
    </section>
    <p id="legend" class="legend">Select a digit, then double tap a cell to place it. Use ? then double tap to mark uncertainty. Tap # to toggle the per-cell option grid. Turn off Help to manage options manually.</p>
  </main>
  <div id="keypad" class="keypad" aria-label="Digit keypad"></div>
  <div id="print-sheet" aria-hidden="true"></div>

  <script type="module" src="./sudoku-app.js"></script>
</body>
</html>
